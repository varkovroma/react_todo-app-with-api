{"version":3,"sources":["utils/fetchClient.ts","types/Error.ts","api/users.ts","components/Auth/AuthForm.tsx","components/Auth/AuthContext.tsx","api/todos.ts","components/Header/Header.tsx","types/PressedButton.ts","components/TodoLoader/TodoLoader.tsx","components/TodoItem/TodoItem.tsx","types/Filter.ts","components/TodoList/TodoList.tsx","components/ErrorNotification/ErrorNotification.tsx","components/Footer/Footer.tsx","App.tsx","index.tsx"],"names":["BASE_URL","wait","delay","Promise","resolve","setTimeout","request","url","method","data","options","body","JSON","stringify","headers","then","fetch","response","ok","Error","json","ErrorMessage","client","getUserByEmail","email","a","users","createUser","name","AuthForm","onLogin","useState","setEmail","setName","needToRegister","setNeedToRegister","loading","setLoading","errorMessage","setErrorMessage","saveUser","user","localStorage","setItem","useEffect","userData","getItem","parse","error","loadUser","handleSubmit","event","preventDefault","onSubmit","className","htmlFor","classNames","type","id","placeholder","disabled","value","required","onChange","e","target","minLength","AuthContext","React","createContext","AuthProvider","children","setUser","Provider","getTodos","userId","addTodo","title","completed","deleteTodo","todoId","updateTodo","property","PressedButton","Header","newTodoField","setTitle","handleAllCompleted","todos","isAdding","setIsAdding","setTodos","current","focus","newTodo","useCallback","trim","ErrorTitle","postTodo","prevTodos","NotAdd","active","every","todo","onClick","ref","TodoLoader","FilterType","TodoItem","removeTodo","selectedId","handleChange","selectedTodo","setSelectedTodo","doubleClick","setDoubleClick","newTitle","setNewTitle","useRef","isLoading","useMemo","includes","updateTodoTitle","find","element","handleDoubleClick","checked","onBlur","onKeyDown","key","Escape","Enter","onDoubleClick","TodoList","TransitionGroup","map","CSSTransition","timeout","Math","random","ErrorNotification","isError","setIsError","timer","clearTimeout","hidden","Footer","filterType","filterTypes","completedTodos","setSelectedId","todosLeft","filter","length","deleteCompletedTodos","all","catch","NotDelete","href","classnames","selected","All","Active","Completed","App","setFilterType","toggle","setToggle","useContext","getTodosFromServer","receivedTodos","filteredTodos","TodoId","updateId","changeStatus","NotUpdate","newTodos","Root","createRoot","document","getElementById","render"],"mappings":"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","file":"static/js/main.79264ddf.chunk.js","sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nconst BASE_URL = 'https://mate.academy/students-api';\n\nfunction wait(delay: number) {\n  return new Promise(resolve => {\n    setTimeout(resolve, delay);\n  });\n}\n\ntype RequestMethod = 'GET' | 'POST' | 'PATCH' | 'DELETE';\n\nfunction request<T>(\n  url: string,\n  method: RequestMethod = 'GET',\n  data: any = null,\n): Promise<T> {\n  const options: RequestInit = { method };\n\n  if (data) {\n    options.body = JSON.stringify(data);\n    options.headers = {\n      'Content-Type': 'application/json; charset=UTF-8',\n    };\n  }\n\n  return wait(300)\n    .then(() => fetch(BASE_URL + url, options))\n    .then(response => {\n      if (!response.ok) {\n        throw new Error();\n      }\n\n      return response.json();\n    });\n}\n\nexport const client = {\n  get: <T>(url: string) => request<T>(url),\n  post: <T>(url: string, data: any) => request<T>(url, 'POST', data),\n  patch: <T>(url: string, data: any) => request<T>(url, 'PATCH', data),\n  delete: (url: string) => request(url, 'DELETE'),\n};\n","export enum ErrorMessage {\n  ErrorTitle = 'Title cannot be empty',\n  NotAdd = 'Unable to add a todo',\n  NotDelete = 'Unable to delete a todo',\n  NotUpdate = 'Unable to update a todo',\n}\n","import { User } from '../types/User';\r\nimport { client } from '../utils/fetchClient';\r\n\r\nexport const getUserByEmail = async (email: string) => {\r\n  const users = await client.get<User[]>(`/users?email=${email}`);\r\n\r\n  return users[0] || null;\r\n};\r\n\r\ntype UserData = Pick<User, 'name' | 'email'>;\r\n\r\nexport const createUser = async ({ email, name }: UserData) => {\r\n  return client.post<User>('/users', { email, name });\r\n};\r\n","import classNames from 'classnames';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { createUser, getUserByEmail } from '../../api/users';\r\nimport { User } from '../../types/User';\r\n\r\nexport type Props = {\r\n  onLogin: (user: User) => void,\r\n};\r\n\r\nexport const AuthForm: React.FC<Props> = ({ onLogin }) => {\r\n  const [email, setEmail] = useState('');\r\n  const [name, setName] = useState('');\r\n  const [needToRegister, setNeedToRegister] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  const saveUser = (user: User) => {\r\n    localStorage.setItem('user', JSON.stringify(user));\r\n    onLogin(user);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const userData = localStorage.getItem('user');\r\n\r\n    if (!userData) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const user = JSON.parse(userData) as User;\r\n\r\n      onLogin(user);\r\n    } catch (error) {\r\n      // Need to login\r\n    }\r\n  }, []);\r\n\r\n  const loadUser = async () => {\r\n    const user = await getUserByEmail(email);\r\n\r\n    if (user) {\r\n      saveUser(user);\r\n    } else {\r\n      setNeedToRegister(true);\r\n    }\r\n  };\r\n\r\n  const registerUser = () => {\r\n    return createUser({ name, email })\r\n      .then(saveUser);\r\n  };\r\n\r\n  const handleSubmit = async (event: React.FormEvent) => {\r\n    event.preventDefault();\r\n\r\n    setErrorMessage('');\r\n    setLoading(true);\r\n\r\n    try {\r\n      if (needToRegister) {\r\n        await registerUser();\r\n      } else {\r\n        await loadUser();\r\n      }\r\n    } catch (error) {\r\n      setErrorMessage('Something went wrtong');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"box mt-5\">\r\n      <h1 className=\"title is-3\">\r\n        {needToRegister ? 'You need to register' : 'Log in to open todos'}\r\n      </h1>\r\n\r\n      <div className=\"field\">\r\n        <label className=\"label\" htmlFor=\"user-email\">\r\n          Email\r\n        </label>\r\n\r\n        <div\r\n          className={classNames('control has-icons-left', {\r\n            'is-loading': loading,\r\n          })}\r\n        >\r\n          <input\r\n            type=\"email\"\r\n            id=\"user-email\"\r\n            className={classNames('input', {\r\n              'is-danger': !needToRegister && errorMessage,\r\n            })}\r\n            placeholder=\"Enter your email\"\r\n            disabled={loading || needToRegister}\r\n            value={email}\r\n            required\r\n            onChange={e => setEmail(e.target.value)}\r\n          />\r\n\r\n          <span className=\"icon is-small is-left\">\r\n            <i className=\"fas fa-envelope\" />\r\n          </span>\r\n        </div>\r\n\r\n        {!needToRegister && errorMessage && (\r\n          <p className=\"help is-danger\">{errorMessage}</p>\r\n        )}\r\n      </div>\r\n\r\n      {needToRegister && (\r\n        <div className=\"field\">\r\n          <label className=\"label\" htmlFor=\"user-name\">\r\n            Your Name\r\n          </label>\r\n\r\n          <div\r\n            className={classNames('control has-icons-left', {\r\n              'is-loading': loading,\r\n            })}\r\n          >\r\n            <input\r\n              type=\"text\"\r\n              id=\"user-name\"\r\n              className={classNames('input', {\r\n                'is-danger': needToRegister && errorMessage,\r\n              })}\r\n              placeholder=\"Enter your name\"\r\n              required\r\n              minLength={4}\r\n              disabled={loading}\r\n              value={name}\r\n              onChange={e => setName(e.target.value)}\r\n            />\r\n\r\n            <span className=\"icon is-small is-left\">\r\n              <i className=\"fas fa-user\" />\r\n            </span>\r\n          </div>\r\n\r\n          {needToRegister && errorMessage && (\r\n            <p className=\"help is-danger\">{errorMessage}</p>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"field\">\r\n        <button\r\n          type=\"submit\"\r\n          className={classNames('button is-primary', {\r\n            'is-loading': loading,\r\n          })}\r\n        >\r\n          {needToRegister ? 'Register' : 'Login'}\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { User } from '../../types/User';\r\nimport { AuthForm } from './AuthForm';\r\n\r\nexport const AuthContext = React.createContext<User | null>(null);\r\n\r\ntype Props = {\r\n  children: React.ReactNode;\r\n};\r\n\r\nexport const AuthProvider: React.FC<Props> = ({ children }) => {\r\n  const [user, setUser] = useState<User | null>(null);\r\n\r\n  if (!user) {\r\n    return <AuthForm onLogin={setUser} />;\r\n  }\r\n\r\n  return (\r\n    <AuthContext.Provider value={user}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n","import { Todo } from '../types/Todo';\nimport { client } from '../utils/fetchClient';\n\nexport const getTodos = (userId: number) => {\n  return client.get<Todo[]>(`/todos?userId=${userId}`);\n};\n\nexport const addTodo = (title: string, userId: number) => {\n  return client.post<Todo>('/todos',\n    {\n      title,\n      userId,\n      completed: false,\n    });\n};\n\nexport const deleteTodo = (todoId: number) => {\n  return client.delete(`/todos/${todoId}`);\n};\n\nexport const updateTodo = (\n  todoId: number, property: Partial<Todo>,\n): Promise<Todo> => {\n  return client.patch(`/todos/${todoId}`, property);\n};\n","import classNames from 'classnames';\nimport React, { FormEvent, useCallback, useEffect } from 'react';\nimport { addTodo } from '../../api/todos';\nimport { ErrorMessage } from '../../types/Error';\nimport { Todo } from '../../types/Todo';\nimport { User } from '../../types/User';\n\ntype Props = {\n  newTodoField: React.RefObject<HTMLInputElement>;\n  setTitle: React.Dispatch<React.SetStateAction<string>>;\n  title: string;\n  handleAllCompleted: () => void;\n  todos: Todo[];\n  isAdding: boolean;\n  setIsAdding: React.Dispatch<React.SetStateAction<boolean>>;\n  user: User | null;\n  setErrorMessage: React.Dispatch<React.SetStateAction<string>>;\n  setTodos: React.Dispatch<React.SetStateAction<Todo[]>>;\n};\n\nexport const Header: React.FC<Props> = ({\n  newTodoField,\n  setTitle,\n  title,\n  handleAllCompleted,\n  todos,\n  isAdding,\n  setIsAdding,\n  user,\n  setErrorMessage,\n  setTodos,\n}) => {\n  const getValue = ({\n    target: { value },\n  }: React.ChangeEvent<HTMLInputElement>) => {\n    setTitle(value);\n  };\n\n  useEffect(() => {\n    if (newTodoField.current) {\n      newTodoField.current.focus();\n    }\n  }, [isAdding]);\n\n  const newTodo = useCallback(async (event: FormEvent) => {\n    event.preventDefault();\n    if (!title.trim() || !user) {\n      setErrorMessage(ErrorMessage.ErrorTitle);\n\n      return;\n    }\n\n    setIsAdding(true);\n\n    try {\n      const postTodo = await addTodo(title, user.id);\n\n      setTodos((prevTodos) => [...prevTodos, postTodo]);\n    } catch {\n      setErrorMessage(ErrorMessage.NotAdd);\n    }\n\n    setIsAdding(false);\n    setTitle('');\n  }, [title, user]);\n\n  return (\n    <header className=\"todoapp__header\">\n      <button\n        data-cy=\"ToggleAllButton\"\n        type=\"button\"\n        className={\n          classNames(\n            'todoapp__toggle-all',\n            { active: todos.every(todo => todo.completed) },\n          )\n        }\n        aria-label=\"close\"\n        onClick={handleAllCompleted}\n      />\n\n      <form\n        onSubmit={newTodo}\n      >\n        <input\n          data-cy=\"NewTodoField\"\n          type=\"text\"\n          ref={newTodoField}\n          className=\"todoapp__new-todo\"\n          placeholder=\"What needs to be done?\"\n          value={title}\n          onChange={getValue}\n          disabled={isAdding}\n        />\n      </form>\n    </header>\n  );\n};\n","export enum PressedButton {\n  Escape = 'Escape',\n  Enter = 'Enter',\n}\n","import React from 'react';\n\nexport const TodoLoader: React.FC = () => (\n  <div\n    data-cy=\"TodoLoader\"\n    className=\"modal overlay is-active\"\n  >\n    <div className=\"modal-background has-background-white-ter\" />\n    <div className=\"loader\" />\n  </div>\n);\n","import classNames from 'classnames';\nimport {\n  ChangeEvent,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport { Todo } from '../../types/Todo';\nimport { TodoLoader } from '../TodoLoader/TodoLoader';\nimport { PressedButton } from '../../types/PressedButton';\n\ntype Props = {\n  todo: Todo;\n  todos: Todo[];\n  removeTodo: (TodoId: number) => void;\n  selectedId: number[];\n  isAdding: boolean;\n  handleChange: (updateId: number, data: Partial<Todo>) => Promise<void>;\n  selectedTodo: number;\n  setSelectedTodo: (value: number) => void;\n};\n\nexport const TodoItem: React.FC<Props> = ({\n  todo,\n  todos,\n  removeTodo,\n  selectedId,\n  isAdding,\n  handleChange,\n  selectedTodo,\n  setSelectedTodo,\n}) => {\n  const [doubleClick, setDoubleClick] = useState(false);\n  const [newTitle, setNewTitle] = useState<string>('');\n  const newTodoField = useRef<HTMLInputElement>(null);\n\n  const { title, id, completed } = todo;\n\n  const isLoading = useMemo(() => selectedId.includes(id)\n    || (isAdding && id === 0), [isAdding, selectedId, id]);\n\n  const updateTodoTitle = useCallback(() => {\n    if (!newTitle) {\n      removeTodo(selectedTodo);\n      setDoubleClick(false);\n\n      return;\n    }\n\n    if (newTitle === todo.title) {\n      setDoubleClick(false);\n\n      return;\n    }\n\n    if (todos.find(element => element.title === newTitle)) {\n      setDoubleClick(false);\n      setSelectedTodo(0);\n    }\n\n    handleChange(selectedTodo, { title: newTitle });\n    setDoubleClick(false);\n    setNewTitle('');\n    setSelectedTodo(0);\n  }, [newTitle, selectedTodo, doubleClick]);\n\n  const todoTitleChange = (event: ChangeEvent<HTMLInputElement>) => {\n    setNewTitle(event.target.value);\n  };\n\n  const handleDoubleClick = useCallback(() => {\n    setDoubleClick(true);\n    setSelectedTodo(id);\n    setNewTitle(todo.title);\n  }, [doubleClick]);\n\n  const handleBlur = () => {\n    updateTodoTitle();\n    setDoubleClick(false);\n  };\n\n  const handleKeyPress = (event: { key: string; }) => {\n    if (event.key === PressedButton.Escape) {\n      setDoubleClick(false);\n    }\n\n    if (event.key === PressedButton.Enter) {\n      updateTodoTitle();\n    }\n  };\n\n  useEffect(() => {\n    if (newTodoField.current) {\n      newTodoField.current.focus();\n    }\n  }, [selectedTodo]);\n\n  return (\n    <div\n      className={classNames('todo', {\n        completed,\n      })}\n      data-cy=\"Todo\"\n      key={id}\n    >\n      <label className=\"todo__status-label\">\n        <input\n          type=\"checkbox\"\n          className=\"todo__status\"\n          data-cy=\"TodoStatus\"\n          checked={completed}\n          onChange={() => handleChange(id, { completed: !completed })}\n        />\n      </label>\n      {doubleClick && selectedTodo === id\n        ? (\n          <form onSubmit={event => {\n            event.preventDefault();\n          }}\n          >\n            <input\n              data-cy=\"TodoTitleField\"\n              type=\"text\"\n              ref={newTodoField}\n              className=\"todo__title-field\"\n              value={newTitle}\n              placeholder=\"Employ todo will be deleted\"\n              onChange={todoTitleChange}\n              onBlur={handleBlur}\n              onKeyDown={handleKeyPress}\n            />\n          </form>\n        )\n        : (\n          <>\n            <span\n              data-cy=\"TodoTitle\"\n              className=\"todo__title\"\n              onDoubleClick={handleDoubleClick}\n            >\n              {title}\n            </span>\n            <button\n              type=\"button\"\n              className=\"todo__remove\"\n              data-cy=\"TodoDeleteButton\"\n              onClick={() => {\n                removeTodo(id);\n              }}\n            >\n              ×\n            </button>\n          </>\n        )}\n      {isLoading && (\n        <TodoLoader />\n      )}\n    </div>\n  );\n};\n","export enum FilterType {\n  All = 'all',\n  Active = 'active',\n  Completed = 'completed',\n}\n","import { TransitionGroup, CSSTransition } from 'react-transition-group';\nimport React from 'react';\nimport { Todo } from '../../types/Todo';\nimport { TodoItem } from '../TodoItem/TodoItem';\n\nimport '../../styles/transistiongroup.scss';\n\ntype Props = {\n  todos: Todo[];\n  removeTodo: (TodoId: number) => void;\n  selectedId: number[];\n  isAdding: boolean;\n  title: string;\n  handleChange: (updateId: number, data: Partial<Todo>) => Promise<void>;\n  selectedTodo: number;\n  setSelectedTodo: (value: number) => void;\n};\n\nexport const TodoList: React.FC<Props> = ({\n  todos,\n  removeTodo,\n  selectedId,\n  isAdding,\n  title,\n  handleChange,\n  selectedTodo,\n  setSelectedTodo,\n}) => {\n  return (\n    <section className=\"todoapp__main\" data-cy=\"TodoList\">\n\n      <TransitionGroup>\n        {todos.map(todo => (\n          <CSSTransition\n            key={todo.id}\n            timeout={300}\n            classNames=\"item\"\n          >\n            <TodoItem\n              key={todo.id}\n              todo={todo}\n              removeTodo={removeTodo}\n              selectedId={selectedId}\n              isAdding={isAdding}\n              handleChange={handleChange}\n              todos={todos}\n              selectedTodo={selectedTodo}\n              setSelectedTodo={setSelectedTodo}\n            />\n          </CSSTransition>\n        ))}\n\n        {isAdding && (\n          <CSSTransition\n            key={0}\n            timeout={300}\n            classNames=\"temp-item\"\n          >\n            <TodoItem\n              key={Math.random()}\n              todo={{\n                id: 0,\n                title,\n                completed: false,\n                userId: Math.random(),\n              }}\n              removeTodo={removeTodo}\n              selectedId={selectedId}\n              isAdding={isAdding}\n              handleChange={handleChange}\n              todos={todos}\n              selectedTodo={selectedTodo}\n              setSelectedTodo={setSelectedTodo}\n            />\n          </CSSTransition>\n        )}\n      </TransitionGroup>\n    </section>\n  );\n};\n","import classNames from 'classnames';\nimport { useEffect, useState } from 'react';\n\ntype Props = {\n  errorMessage: string;\n  setErrorMessage: (arg: string) => void;\n};\n\nexport const ErrorNotification: React.FC<Props> = ({\n  errorMessage,\n  setErrorMessage,\n}) => {\n  const [isError, setIsError] = useState(false);\n\n  useEffect(() => {\n    const timer = setTimeout(() => setErrorMessage(''), 3000);\n\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [errorMessage, isError]);\n\n  return (\n    <div\n      className={classNames(\n        'notification',\n        'is-danger',\n        'is-light',\n        'has-text-weight-normal',\n        {\n          hidden: isError,\n        },\n      )}\n      data-cy=\"ErrorNotification\"\n    >\n      <button\n        data-cy=\"HideErrorButton\"\n        type=\"button\"\n        className=\"delete\"\n        onClick={() => setIsError(true)}\n        aria-label=\"close\"\n      />\n      {errorMessage}\n    </div>\n  );\n};\n","import classnames from 'classnames';\nimport { useCallback, useMemo } from 'react';\nimport { deleteTodo } from '../../api/todos';\nimport { ErrorMessage } from '../../types/Error';\nimport { FilterType } from '../../types/Filter';\nimport { Todo } from '../../types/Todo';\n\ntype Props = {\n  todos: Todo[];\n  filterType: FilterType | string;\n  filterTypes: (arg: FilterType) => void;\n  completedTodos: Todo[];\n  setSelectedId: React.Dispatch<React.SetStateAction<number[]>>;\n  selectedId: number[];\n  setErrorMessage: React.Dispatch<React.SetStateAction<string>>;\n  errorMessage: string;\n  setTodos: React.Dispatch<React.SetStateAction<Todo[]>>;\n};\n\nexport const Footer: React.FC<Props> = ({\n  todos,\n  filterType,\n  filterTypes,\n  completedTodos,\n  setSelectedId,\n  selectedId,\n  setErrorMessage,\n  errorMessage,\n  setTodos,\n}) => {\n  const todosLeft = useMemo(() => {\n    return todos.filter(todo => !todo.completed).length;\n  }, [todos]);\n\n  const deleteCompletedTodos = useCallback(async () => {\n    setSelectedId(completedTodos.map((todo => todo.id)));\n\n    await Promise.all(completedTodos.map(({ id }) => deleteTodo(id)))\n      .then(() => setTodos((prevTodos) => prevTodos\n        .filter(({ completed }) => !completed)))\n      .catch(() => {\n        setErrorMessage(ErrorMessage.NotDelete);\n        setSelectedId([]);\n      });\n\n    setSelectedId([]);\n  }, [todos, selectedId, errorMessage]);\n\n  return (\n    <footer className=\"todoapp__footer\" data-cy=\"Footer\">\n      <span className=\"todo-count\" data-cy=\"todosCounter\">\n        {`${todosLeft} items left`}\n      </span>\n\n      <nav className=\"filter\" data-cy=\"Filter\">\n        <a\n          data-cy=\"FilterLinkAll\"\n          href=\"#/\"\n          className={classnames(\n            'filter__link',\n            { selected: filterType === FilterType.All },\n          )}\n          onClick={() => filterTypes(FilterType.All)}\n        >\n          All\n        </a>\n\n        <a\n          data-cy=\"FilterLinkActive\"\n          href=\"#/active\"\n          className={classnames(\n            'filter__link',\n            { selected: filterType === FilterType.Active },\n          )}\n          onClick={() => filterTypes(FilterType.Active)}\n        >\n          Active\n        </a>\n        <a\n          data-cy=\"FilterLinkCompleted\"\n          href=\"#/completed\"\n          className={classnames(\n            'filter__link',\n            { selected: filterType === FilterType.Completed },\n          )}\n          onClick={() => filterTypes(FilterType.Completed)}\n        >\n          Completed\n        </a>\n      </nav>\n      <button\n        data-cy=\"ClearCompletedButton\"\n        type=\"button\"\n        className=\"todoapp__clear-completed\"\n        onClick={deleteCompletedTodos}\n        disabled={!completedTodos}\n      >\n        Clear completed\n      </button>\n    </footer>\n  );\n};\n","import React, {\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport { AuthContext } from './components/Auth/AuthContext';\nimport { Header } from './components/Header/Header';\nimport { TodoList } from './components/TodoList';\nimport { ErrorNotification } from './components/ErrorNotification';\nimport { Footer } from './components/Footer';\nimport { Todo } from './types/Todo';\nimport { FilterType } from './types/Filter';\nimport {\n  getTodos,\n  deleteTodo,\n  updateTodo,\n} from './api/todos';\nimport { ErrorMessage } from './types/Error';\n\nexport const App: React.FC = () => {\n  const newTodoField = useRef<HTMLInputElement>(null);\n  const [todos, setTodos] = useState<Todo[]>([]);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [filterType, setFilterType] = useState(FilterType.All);\n  const [title, setTitle] = useState('');\n  const [selectedId, setSelectedId] = useState<number[]>([]);\n  const [isAdding, setIsAdding] = useState(false);\n  const [toggle, setToggle] = useState(true);\n  const [selectedTodo, setSelectedTodo] = useState(0);\n  const user = useContext(AuthContext);\n\n  useEffect(() => {\n    const getTodosFromServer = async (userId: number) => {\n      try {\n        const receivedTodos = await getTodos(userId);\n\n        setTodos(receivedTodos);\n      } catch (error) {\n        setErrorMessage(`${error}`);\n      }\n    };\n\n    if (!user) {\n      return;\n    }\n\n    getTodosFromServer(user.id);\n  }, []);\n\n  const filteredTodos = useMemo(() => {\n    return todos.filter(todo => {\n      switch (filterType) {\n        case FilterType.Active:\n          return !todo.completed;\n        case FilterType.Completed:\n          return todo.completed;\n        default:\n          return true;\n      }\n    });\n  }, [todos, filterType]);\n\n  const removeTodo = useCallback(async (TodoId: number) => {\n    setSelectedId([TodoId]);\n    try {\n      await deleteTodo(TodoId);\n\n      setTodos((prevTodos) => prevTodos.filter(({ id }) => id !== TodoId));\n    } catch {\n      setErrorMessage(ErrorMessage.NotDelete);\n    }\n  }, [todos, errorMessage]);\n\n  const completedTodos = useMemo(() => {\n    return todos.filter(todo => todo.completed);\n  }, [todos]);\n\n  const handleChange = useCallback(\n    async (updateId: number, data: Partial<Todo>) => {\n      setSelectedId([updateId]);\n\n      try {\n        const changeStatus: Todo = await updateTodo(updateId, data);\n\n        setTodos(prevTodos => prevTodos.map(todo => (\n          todo.id === updateId\n            ? changeStatus\n            : todo\n        )));\n      } catch {\n        setErrorMessage(ErrorMessage.NotUpdate);\n      }\n\n      setSelectedId([]);\n    }, [todos],\n  );\n\n  const handleAllCompleted = async () => {\n    if (completedTodos.length === todos.length) {\n      setSelectedId(todos.map(todo => todo.id));\n    } else {\n      setSelectedId(todos.filter(todo => !todo.completed)\n        .map(todo => todo.id));\n    }\n\n    try {\n      const newTodos = await Promise.all(todos.map(todo => (\n        todo.completed !== toggle\n          ? updateTodo(todo.id, { completed: toggle })\n          : todo\n      )));\n\n      setTodos(newTodos);\n    } catch {\n      setErrorMessage(ErrorMessage.NotUpdate);\n    }\n\n    setToggle(!toggle);\n    setSelectedId([]);\n  };\n\n  return (\n    <div className=\"todoapp\">\n      <h1 className=\"todoapp__title\">todos</h1>\n\n      <div className=\"todoapp__content\">\n        <Header\n          newTodoField={newTodoField}\n          setTitle={setTitle}\n          title={title}\n          setIsAdding={setIsAdding}\n          handleAllCompleted={handleAllCompleted}\n          todos={todos}\n          isAdding={isAdding}\n          user={user}\n          setErrorMessage={setErrorMessage}\n          setTodos={setTodos}\n        />\n        {(isAdding || todos.length > 0) && (\n          <>\n            <TodoList\n              todos={filteredTodos}\n              removeTodo={removeTodo}\n              selectedId={selectedId}\n              isAdding={isAdding}\n              title={title}\n              handleChange={handleChange}\n              selectedTodo={selectedTodo}\n              setSelectedTodo={setSelectedTodo}\n            />\n            <Footer\n              filterType={filterType}\n              filterTypes={setFilterType}\n              todos={todos}\n              completedTodos={completedTodos}\n              setTodos={setTodos}\n              setErrorMessage={setErrorMessage}\n              errorMessage={errorMessage}\n              setSelectedId={setSelectedId}\n              selectedId={selectedId}\n            />\n          </>\n        )}\n      </div>\n      {errorMessage && (\n        <ErrorNotification\n          errorMessage={errorMessage}\n          setErrorMessage={setErrorMessage}\n        />\n      )}\n    </div>\n  );\n};\n","import { createRoot } from 'react-dom/client';\r\n\r\nimport 'bulma/css/bulma.css';\r\nimport '@fortawesome/fontawesome-free/css/all.css';\r\nimport './styles/index.scss';\r\n\r\nimport { App } from './App';\r\nimport { AuthProvider } from './components/Auth/AuthContext';\r\n\r\nconst Root = () => (\r\n  <AuthProvider>\r\n    <App />\r\n  </AuthProvider>\r\n);\r\n\r\ncreateRoot(document.getElementById('root') as HTMLDivElement)\r\n  .render(<Root />);\r\n"],"sourceRoot":""}